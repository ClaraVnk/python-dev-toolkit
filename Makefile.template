# Makefile template pour projets Python
# Copiez ce fichier dans votre projet et renommez-le en "Makefile"

.PHONY: help install dev-install format lint security check clean

help:
	@echo "ðŸ› ï¸ Python Dev Toolkit - Commandes de dÃ©veloppement"
	@echo ""
	@echo "Installation:"
	@echo "  make install      - Installer le projet"
	@echo "  make dev-install  - Installer avec les outils de dev"
	@echo ""
	@echo "Workflow de dÃ©veloppement:"
	@echo "  make format       - Formater le code (isort + black)"
	@echo "  make lint         - VÃ©rifier le style (flake8)"
	@echo "  make security     - VÃ©rifier la sÃ©curitÃ© (bandit)"
	@echo "  make check        - Tout vÃ©rifier (format + lint + security)"
	@echo ""
	@echo "Nettoyage:"
	@echo "  make clean        - Nettoyer les fichiers temporaires"

install:
	pip install -e .

dev-install:
	pip install -e ".[dev]"

format:
	@echo "ðŸ“ Organisation des imports avec isort..."
	python3 -m isort src/
	@echo "ðŸŽ¨ Formatage du code avec black..."
	python3 -m black src/
	@echo "âœ… Formatage terminÃ©!"

lint:
	@echo "ðŸ” VÃ©rification du style avec flake8..."
	python3 -m flake8 src/ --max-line-length=88 --extend-ignore=E203,W503,E501,F401,F841
	@echo "âœ… VÃ©rification terminÃ©e!"

security:
	@echo "ðŸ”’ Analyse de sÃ©curitÃ© avec bandit..."
	python3 -m bandit -r src/ -f screen
	@echo "âœ… Analyse de sÃ©curitÃ© terminÃ©e!"

check: format lint security
	@echo "âœ… Toutes les vÃ©rifications sont terminÃ©es!"

clean:
	@echo "ðŸ§¹ Nettoyage des fichiers temporaires..."
	find . -type d -name "__pycache__" -exec rm -rf {} + 2>/dev/null || true
	find . -type f -name "*.pyc" -delete
	find . -type f -name "*.pyo" -delete
	find . -type f -name "*.log" -delete
	rm -rf .pytest_cache .mypy_cache .ruff_cache .coverage htmlcov/
	rm -rf build/ dist/ *.egg-info/
	@echo "âœ… Nettoyage terminÃ©!"
